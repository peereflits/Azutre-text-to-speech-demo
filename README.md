![Logo](./img/peereflits-logo.svg) 

# Azure Text-to-Speech demo

**A simple application that demos the possibilities of Azure Text-to-Speech synthesis.**

This repository contains a simple console application that demos the possibilities of Azure Text-to-Speech synthesis by using SSML (Speech Synthesis Markup Language - an xml-dialect).

Before running the application, make sure you have an Azure subscription and a Speech resource. You can create a Speech resource in the Azure portal or by using the Azure CLI. Update the speech key and location in the [appsettings.json](./src/Speech.Demo/appsettings.json) file.

## Concepts and definitions

There are multiple ways of working with speech and text in an AI matter:
* **TTS**: Text-To-Speech
* **STT**: Speech-To-Text
* **OCR**: Image-To-Text 

**Please be aware** that there are multiple TTS/STT services is Azure:
* Azure OpenAI Service (OpenAI voices)
* Azure AI Speech (OpenAI voices)
* Azure AI Speech voices

See: [OpenAI text to speech voices via Azure OpenAI Service or via Azure AI Speech?](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/openai-voices#openai-text-to-speech-voices-via-azure-openai-service-or-via-azure-ai-speech) or [Azure Text-To-Speech](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-csharp) and [Azure Open AI Text-To-Speech](https://learn.microsoft.com/en-us/azure/ai-services/openai/text-to-speech-quickstart?tabs=command-line%2Ckeyless%2Ctypescript-keyless&pivots=programming-language-dotnet).

TTS is part of Azure Cognitive Services, which is nowadays called "Azure AI services". As this demo is about TTS, [Get started with Azure Cognitive Services for Language](https://language.cognitive.azure.com/) is not applicable.

When talking about speech (in SST or TTS) there are three different voices:
* Human voice: a voice produced by the vocal cords of human body.
* Neural voice: a computer generated voice as provided by Azure.
* [Custom Neural voice](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/custom-neural-voice): a computer generated voice based on a recorded human voice.

A neural voice (in Azure) can support [different functionalities](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/language-support?tabs=tts) like the language spoken, styles, roles and viseme. And not all voices are available in all Azure regions: voices can be [bound to a specific region](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/regions?tabs=tts).

The audio, generated by TTS, can be generated in two ways:
* [Short audio](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-csharp): audio generated by the SDK in a near real time manner. Should be less than a few minutes.
* [Batch synthesis](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/batch-synthesis): it creates synthesized audio longer than 10 minutes.

You can feed the speech [SDK](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/speech-sdk)/[CLI](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/spx-overview) plain text to read out loud. But to better control how a voice speaks a provided text, you'd better use [SSML](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/speech-synthesis-markup). Take a closer look, as an example, at the SSML demo files in the source code (Demo##.xml).

The generated audio can be saved in several audio formats. In order to do so, change in [Synthesizer.cs](./src/Speech.Demo/Synthesizer.cs) this:

``` csharp
var speechConfig = SpeechConfig.FromSubscription(settings.SpeechKey, settings.SpeechLocation);
using var synthesizer = new SpeechSynthesizer(speechConfig);
using var result = await synthesizer.SpeakSsmlAsync(ssml);

```

into this:

``` csharp
var speechConfig = SpeechConfig.FromSubscription(settings.SpeechKey, settings.SpeechLocation);
speechConfig.SetSpeechSynthesisOutputFormat(SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3);
using var synthesizer = new SpeechSynthesizer(speechConfig, null); // explicit set the second argument
using var result = await synthesizer.SpeakSsmlAsync(ssml);
```
and save the `result.AudioData`.

## Documentation
* [Text to speech documentation](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/index-text-to-speech)
* [Speech service documentation](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/)


### Costs
* [Azure AI Speech pricing](https://azure.microsoft.com/en-us/pricing/details/cognitive-services/speech-services/)


### SSML
* [Quickstart: Convert text to speech](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-csharp)
* [Speech Synthesis Markup Language (SSML) overview](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/speech-synthesis-markup)
* [SSML document structure and events](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/speech-synthesis-markup-structure)
* [Customize voice and sound with SSML](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/speech-synthesis-markup-voice)

### SDK's
* [What is the Speech SDK?](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/speech-sdk)
* [Speech SDK samples](https://github.com/Azure-Samples/cognitive-services-speech-sdk)
* [Nuget: Microsoft.CognitiveServices.Speech](https://www.nuget.org/packages/Microsoft.CognitiveServices.Speech)

### Batch synthesis
* [Batch synthesis API (Preview) for text to speech](https://learn.microsoft.com/en-us/azure/ai-services/speech-service/batch-synthesis)
* [Github samples](https://github.com/Azure-Samples/cognitive-services-speech-sdk/blob/master/samples/csharp/sharedcontent/console/speech_synthesis_samples.cs)


### Tools
* [Speech Studio](https://speech.microsoft.com/portal)
* [A simple SSML Editor](https://ssml-editor.azurewebsites.net/)
* [Speech Markdown](https://www.speechmarkdown.org/basics/what/)
